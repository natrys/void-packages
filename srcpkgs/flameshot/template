# Template file for 'flameshot'
pkgname=flameshot
version=13.1.0
revision=1
_qt_color_widgets_version=3.0.0
build_style=cmake
configure_args="-DDISABLE_UPDATE_CHECKER=ON -DUSE_KDSINGLEAPPLICATION=OFF
 $(vopt_if imgur -DENABLE_IMGUR=ON)"
hostmakedepends="qt6-tools qt6-base"
makedepends="qt6-svg-devel qt6-wayland-devel"
depends="$(vopt_if imgur qt6-plugin-tls-openssl)"
short_desc="Powerful yet simple to use screenshot software for GNU/Linux"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-3.0-or-later"
homepage="https://github.com/lupoDharkael/flameshot"
distfiles="https://github.com/lupoDharkael/flameshot/archive/v${version}.tar.gz
 https://gitlab.com/mattbas/Qt-Color-Widgets/-/archive/${_qt_color_widgets_version}/Qt-Color-Widgets-${_qt_color_widgets_version}.tar.gz>Qt-Color-Widgets.tar.gz"
checksum="1d755a618bdcb3e739f691cea55ed2d432f93e521a504f95b74abed0c595f6f7
 8b8020d661894ece5bfb96d0b4e2e0e15db69839a986b59f8748f12c603e021b"
skip_extraction="Qt-Color-Widgets.tar.gz"

build_options="imgur"
desc_option_imgur="Enable uploading screenshot to Imgur online service"

post_extract() {
	vsrcextract -C external/Qt-Color-Widgets/ --strip-components=1 Qt-Color-Widgets.tar.gz
}
